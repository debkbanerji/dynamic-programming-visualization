<div class="row no-gutter" id="main-container">
    <div id="editor-container" class="col-xs-12 col-md-5">
        <mat-card>
            <mat-card-header>
            </mat-card-header>
            <b>Table Contents</b>
            <mat-card-content>
                <mat-form-field>
                    <label for="table-shape-select">Table Shape</label>
                    <mat-select [(ngModel)]="solution.tableShape" id="table-shape-select">
                        <mat-option value="1d">1 Dimensional</mat-option>
                        <mat-option value="2d">2 Dimensional</mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field>
                    <label for="table-data-type-select">Data Type</label>
                    <mat-select [(ngModel)]="solution.tableDataType" id="table-data-type-select">
                        <mat-option value="number">Numbers</mat-option>
                        <mat-option value="boolean">Booleans</mat-option>
                    </mat-select>
                </mat-form-field>
                <form>
                    <mat-form-field *ngIf="solution.tableShape === '1d'">
                        <input matInput placeholder="Table Size"
                               [(ngModel)]="solution.tableDimension1" name="tableDimension1">
                    </mat-form-field>
                    <mat-form-field *ngIf="solution.tableShape === '2d'">
                        <input matInput placeholder="Number of Rows"
                               [(ngModel)]="solution.tableDimension1" name="tableDimension1">
                    </mat-form-field>
                    <mat-form-field *ngIf="solution.tableShape === '2d'">
                        <input matInput placeholder="Number of Columns"
                               [(ngModel)]="solution.tableDimension2" name="tableDimension2">
                    </mat-form-field>
                </form>
                <p>
                    <b>Solution Code</b>
                </p>
                <!--<p>-->
                <!--<small>-->
                <!--<em>// Note: All providedSolution code is in Javascript-->
                <!--</em>-->
                <!--</small>-->
                <!--</p>-->
                <!--<mat-card id="code-card">-->
                <!--<mat-card-content>-->
                <p class="code" *ngIf="solution.tableShape === '1d'">T = A table of size
                    {{solution.tableDimension1 || '?'}}</p>
                <p class="code" *ngIf="solution.tableShape === '2d'">T = A table with
                    {{solution.tableDimension1 || '?'}} rows and {{solution.tableDimension2 || '?'}} columns</p>
                <!--<textarea spellcheck="false" id="initialization-textarea" class="code"-->
                <!--[(ngModel)]="solution.initializationCode"-->
                <!--title="initializationCode" rows="3"></textarea>-->
                <p class="code">for (
                    <input [(ngModel)]="solution.for1Variable"
                           title="for1Variable"
                           class="input-field-small" value="i"> =
                    <input [(ngModel)]="solution.for1Init"
                           title="for1Init"
                           class="input-field-small" value="0">;
                    <input [(ngModel)]="solution.for1Condition"
                           title="for1Condition"
                           class="input-field-small" value="i < (TODO: Define)">;
                    <input [(ngModel)]="solution.for1Update"
                           title="for1Update"
                           class="input-field-small" value="i = i + 1">) {{'{'}}</p>
                <p class="code" [hidden]="solution.tableShape === '1d'">&nbsp;&nbsp;for (
                    <input [(ngModel)]="solution.for2Variable"
                           title="for2Variable"
                           class="input-field-small" value="j"> =
                    <input [(ngModel)]="solution.for2Init"
                           title="for2Init"
                           class="input-field-small" value="0">;
                    <input [(ngModel)]="solution.for2Condition"
                           title="for2Condition"
                           class="input-field-small" value="j < (TODO: Define)">;
                    <input [(ngModel)]="solution.for2Update"
                           title="for2Update"
                           class="input-field-small" value="j = j + 1">) {{'{'}}</p>

                <div>
                    <div id="default-entry-container">
                        <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                        <span *ngIf="solution.tableShape === '2d'">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                        <!--<span *ngIf="!useDefaultTableEntry">// </span>-->
                        <span class="code">let entry = <input [(ngModel)]="solution.defaultTableEntry"
                                                              [hidden]="!solution.useDefaultTableEntry"
                                                              title="defaultTableEntry"
                                                              class="input-field-small" value="">
                        </span>
                        <span *ngIf="!solution.useDefaultTableEntry">null</span>;
                        &nbsp;&nbsp;
                        <mat-checkbox [(ngModel)]="solution.useDefaultTableEntry">Set a default value</mat-checkbox>
                        <!--<input type="checkbox" [(ngModel)]="useDefaultTableEntry"-->
                        <!--title="useDefaultTableEntry"> Use default value-->
                    </div>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span *ngIf="solution.tableShape === '2d'">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span class="set-next-value-container">
                    <textarea spellcheck="false" id="set-next-value-textarea" class="code"
                              [(ngModel)]="solution.setNextEntryCode"
                              title="setNextValueCode" rows="15"></textarea>
                    </span>
                    <br>
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span *ngIf="solution.tableShape === '2d'">&nbsp;&nbsp;&nbsp;&nbsp;</span>
                    <span class="code">T<span *ngIf="solution.tableShape === '2d'"></span>(<input
                        [(ngModel)]="solution.nextEntryIndex1"
                        title="nextEntryIndex1"
                        class="input-field-small"
                        value="i"><span
                        [hidden]="solution.tableShape === '1d'">,<input
                        [(ngModel)]="solution.nextEntryIndex2"
                        title="nextEntryIndex2"
                        class="input-field-small"
                        value="j"></span>) = entry;</span>
                </div>
                <p class="code" [hidden]="solution.tableShape === '1d'">&nbsp;{{'}'}}</p>
                <p class="code">{{'}'}}</p>
                <textarea spellcheck="false" id="return-value-textarea" class="code"
                          [(ngModel)]="solution.returnValueCode"
                          title="returnValueCode" rows="6"></textarea>
                <!--</mat-card-content>-->
                <!--</mat-card>-->
                <button mat-raised-button
                        (click)="runAllTests()">
                    Generate Code and Run Tests
                </button>
                <button mat-button id="reveal-solution-button"
                        (click)="openPopulateGivenSolutionDialog()">
                    Show Solution
                </button>
                <!--<br>-->
                <!--<br>-->
                <!--<mat-expansion-panel *ngIf="generatedCode">-->
                    <!--<mat-expansion-panel-header>-->
                        <!--<mat-panel-title>-->
                            <!--<b>Generated Code</b>-->
                        <!--</mat-panel-title>-->
                    <!--</mat-expansion-panel-header>-->
                    <!--<div>-->
                        <!--<small [innerHTML]="generatedCode"-->
                               <!--class="code"></small>-->
                    <!--</div>-->
                <!--</mat-expansion-panel>-->
            </mat-card-content>
        </mat-card>
    </div>
    <div id="input-and-table-container" class="col-xs-12 col-md-7" *ngIf="problemDefined">
        <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header>
                <mat-panel-title>
                    <b>{{problem['name']}}</b>
                </mat-panel-title>
                <!--<mat-panel-description>-->
                <!--{{problem['name']}}-->
                <!--</mat-panel-description>-->
            </mat-expansion-panel-header>
            <div [innerHTML]="problem['problem-statement']"></div>
        </mat-expansion-panel>
        <mat-card>
            <mat-card-content>
                <b>Test Cases</b>
                <mat-tab-group id="test-case-group">
                    <!--<mat-tab label="Custom test case">-->
                    <!--&lt;!&ndash;TODO: Implement custom input&ndash;&gt;-->
                    <!--</mat-tab>-->
                    <mat-tab *ngFor="let testCase of testCases; let testCaseIndex = index" label="{{testCase['name']}}">
                        <mat-expansion-panel [expanded]="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title class="slightly-bold-label">Input Values</mat-panel-title>
                            </mat-expansion-panel-header>
                            <div *ngFor="let input of objectKeys(problem['input'])">
                                <span class="slightly-bold-label">{{input}}:</span>
                                <span *ngIf="problem['input'][input]['type'] !== 'array'"
                                      [innerHTML]="' ' + getDisplayedValue(testCase['input'][input], problem['input'][input]['type'])">
                                </span>
                                <div *ngIf="problem['input'][input]['type'] === 'array'">
                                    <table class="dp-table" *ngIf="problem['input'][input]['shape'] === '1d'">
                                        <tr class="dp-tr">
                                            <td class="dp-td" *ngFor="let i of range(testCase['input'][input].length);">
                                            <span class="dp-table-cell"
                                                  [innerHTML]="getDisplayedValue(testCase['input'][input][i], problem['input'][input]['entry-type'])">
                                            </span>
                                            </td>
                                        </tr>
                                    </table>
                                    <table class="dp-table" *ngIf="problem['input'][input]['shape'] === '2d'">
                                        <tr class="dp-tr" *ngFor="let i of range(testCase['input'][input].length);">
                                            <td class="dp-td"
                                                *ngFor="let j of range(testCase['input'][input][0].length);">
                                            <span class="dp-table-cell"
                                                  [innerHTML]="getDisplayedValue(testCase['input'][input][i][j], problem['input'][input]['entry-type'])">
                                            </span>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </mat-expansion-panel>
                        <mat-expansion-panel>
                            <mat-expansion-panel-header>
                                <mat-panel-title class="slightly-bold-label">Expected Results</mat-panel-title>
                            </mat-expansion-panel-header>
                            <span class="slightly-bold-label">Table</span>
                            <button mat-raised-button class="transpose-button"
                                    *ngIf="providedSolution['tableShape'] === '2d'"
                                    (click)="transposeTable()">
                                Transpose
                            </button>
                            <table class="dp-table"
                                   *ngIf="providedSolution['tableShape'] === '2d' && !transpose2dTable">
                                <tr class="dp-tr" *ngFor="let i of range(testCase['expected-table'].length);">
                                    <td class="dp-td" *ngFor="let j of range(testCase['expected-table'][0].length);">
                                    <span class="dp-table-cell"
                                          [innerHTML]="getDisplayedValue(testCase['expected-table'][i][j], providedSolution['tableDataType'])">
                                    </span>
                                    </td>
                                </tr>
                            </table>
                            <table class="dp-table" *ngIf="providedSolution['tableShape'] === '2d' && transpose2dTable">
                                <tr class="dp-tr" *ngFor="let i of range(testCase['expected-table'][0].length);">
                                    <td class="dp-td" *ngFor="let j of range(testCase['expected-table'].length);">
                                    <span class="dp-table-cell"
                                          [innerHTML]="getDisplayedValue(testCase['expected-table'][j][i], providedSolution['tableDataType'])">
                                    </span>
                                    </td>
                                </tr>
                            </table>
                            <table class="dp-table" *ngIf="providedSolution['tableShape'] === '1d'">
                                <tr class="dp-tr">
                                    <td class="dp-td" *ngFor="let i of range(testCase['expected-table'].length);">
                                    <span class="dp-table-cell"
                                          [innerHTML]="getDisplayedValue(testCase['expected-table'][i], providedSolution['tableDataType'])">
                                    </span>
                                    </td>
                                </tr>
                            </table>
                            <br>
                            <span class="slightly-bold-label">Final Answer</span>
                            <span
                                [innerHTML]="' ' + getDisplayedValue(testCase['expected-result'], problem['result-type'])">
                                </span>
                        </mat-expansion-panel>
                        <mat-expansion-panel *ngIf="testResults[testCaseIndex]">
                            <mat-expansion-panel-header>
                                <mat-panel-title class="slightly-bold-label">Test Results</mat-panel-title>
                            </mat-expansion-panel-header>
                        </mat-expansion-panel>
                    </mat-tab>
                </mat-tab-group>
            </mat-card-content>
        </mat-card>
    </div>
</div>
